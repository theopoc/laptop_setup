# SPDX-License-Identifier: MIT-0
---
# tasks file for roles/git

- name: Include OS-specific variables
  ansible.builtin.include_vars: "{{ ansible_facts.os_family }}.yml"
  tags: git

- name: Include OS-specific installation tasks
  ansible.builtin.include_tasks: "install-{{ ansible_facts.os_family }}.yml"
  tags: git

- name: Configure Git settings
  when: git_enabled | bool
  block:
    - name: Configure Git username
      community.general.git_config:
        name: user.name
        scope: global
        value: "{{ git_username }}"

    - name: Configure Git email
      community.general.git_config:
        name: user.email
        scope: global
        value: "{{ git_email }}"

    - name: Configure Git credential helper
      community.general.git_config:
        name: credential.helper
        scope: global
        value: "{{ git_credential_helper }}"
